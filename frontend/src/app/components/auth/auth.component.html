<div class="auth-page">
    <div class="auth-container glass">
        <!-- Logo / Header -->
        <div class="auth-header">
            <div class="auth-logo">
                <i class="fas fa-gamepad"></i>
            </div>
            <h1>{{ isLoginMode ? 'Bienvenido de nuevo' : 'Crear cuenta' }}</h1>
            <p>{{ isLoginMode ? 'Inicia sesión para valorar juegos y guardar puntuaciones' : 'Únete para acceder a todas las funcionalidades' }}</p>
        </div>

        <!-- Error message -->
        <div class="auth-error" *ngIf="error">
            <i class="fas fa-exclamation-triangle"></i>
            {{ error }}
        </div>

        <!-- Success message -->
        <div class="auth-success" *ngIf="success">
            <i class="fas fa-check-circle"></i>
            {{ success }}
        </div>

        <!-- Login Form -->
        <form *ngIf="isLoginMode" (ngSubmit)="onLogin()" class="auth-form">
            <div class="form-group">
                <label for="login-email">
                    <i class="fas fa-envelope"></i> Email
                </label>
                <input
                    type="email"
                    id="login-email"
                    [(ngModel)]="loginEmail"
                    name="email"
                    placeholder="tu@email.com"
                    required
                    autocomplete="email"
                />
            </div>

            <div class="form-group">
                <label for="login-password">
                    <i class="fas fa-lock"></i> Contraseña
                </label>
                <input
                    type="password"
                    id="login-password"
                    [(ngModel)]="loginPassword"
                    name="password"
                    placeholder="••••••••"
                    required
                    autocomplete="current-password"
                />
            </div>

            <button type="submit" class="btn btn-primary btn-full" [disabled]="isLoading">
                <i class="fas" [class.fa-spinner]="isLoading" [class.fa-sign-in-alt]="!isLoading" [class.fa-spin]="isLoading"></i>
                {{ isLoading ? 'Cargando...' : 'Iniciar Sesión' }}
            </button>
        </form>

        <!-- Register Form -->
        <form *ngIf="!isLoginMode" (ngSubmit)="onRegister()" class="auth-form">
            <div class="form-group">
                <label for="reg-username">
                    <i class="fas fa-user"></i> Nombre de usuario
                </label>
                <input
                    type="text"
                    id="reg-username"
                    [(ngModel)]="regUsername"
                    name="username"
                    placeholder="gamer123"
                    required
                    autocomplete="username"
                />
            </div>

            <div class="form-group">
                <label for="reg-displayname">
                    <i class="fas fa-id-card"></i> Nombre para mostrar
                </label>
                <input
                    type="text"
                    id="reg-displayname"
                    [(ngModel)]="regDisplayName"
                    name="displayName"
                    placeholder="Alex García (opcional)"
                    autocomplete="name"
                />
            </div>

            <div class="form-group">
                <label for="reg-email">
                    <i class="fas fa-envelope"></i> Email
                </label>
                <input
                    type="email"
                    id="reg-email"
                    [(ngModel)]="regEmail"
                    name="email"
                    placeholder="tu@email.com"
                    required
                    autocomplete="email"
                />
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="reg-password">
                        <i class="fas fa-lock"></i> Contraseña
                    </label>
                    <input
                        type="password"
                        id="reg-password"
                        [(ngModel)]="regPassword"
                        name="password"
                        placeholder="••••••••"
                        required
                        autocomplete="new-password"
                    />
                </div>

                <div class="form-group">
                    <label for="reg-confirm">
                        <i class="fas fa-lock"></i> Confirmar
                    </label>
                    <input
                        type="password"
                        id="reg-confirm"
                        [(ngModel)]="regConfirmPassword"
                        name="confirmPassword"
                        placeholder="••••••••"
                        required
                        autocomplete="new-password"
                    />
                </div>
            </div>

            <button type="submit" class="btn btn-primary btn-full" [disabled]="isLoading">
                <i class="fas" [class.fa-spinner]="isLoading" [class.fa-user-plus]="!isLoading" [class.fa-spin]="isLoading"></i>
                {{ isLoading ? 'Creando cuenta...' : 'Crear Cuenta' }}
            </button>
        </form>

        <!-- Toggle -->
        <div class="auth-toggle">
            <span>{{ isLoginMode ? '¿No tienes cuenta?' : '¿Ya tienes cuenta?' }}</span>
            <button (click)="toggleMode()" class="toggle-btn">
                {{ isLoginMode ? 'Regístrate' : 'Inicia sesión' }}
            </button>
        </div>

        <!-- Back link -->
        <a routerLink="/" class="back-link">
            <i class="fas fa-arrow-left"></i> Volver al portfolio
        </a>
    </div>
</div>
